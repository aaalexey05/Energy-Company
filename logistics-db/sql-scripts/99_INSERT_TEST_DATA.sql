\c logistics_5nf

-- Города
INSERT INTO города (название, регион, координаты_широта, координаты_долгота, население, часовой_пояс)
VALUES 
('Москва', 'Московская область', 55.7558, 37.6173, 12000000, 'UTC+3'),
('Санкт-Петербург', 'Ленинградская область', 59.9343, 30.3351, 5400000, 'UTC+3'),
('Новосибирск', 'Новосибирская область', 55.0084, 82.9357, 1600000, 'UTC+7')
ON CONFLICT (название) DO NOTHING;

-- Склады
INSERT INTO склады (название, ид_город, адрес_полный, площадь_кв_м, координаты_широта, координаты_долгота, телефон, руководитель_фио, дата_открытия, вместимость_куб_м, статус)
VALUES 
('Склад Москва-Центр', (SELECT ид_город FROM города WHERE название = 'Москва'), 'ул. Складская, 10', 5000, 55.7558, 37.6173, '+7-495-123-45-67', 'Иванов И.И.', '2020-01-15', 10000, 'работает'),
('Склад СПб-Север', (SELECT ид_город FROM города WHERE название = 'Санкт-Петербург'), 'пр. Логистический, 25', 3500, 59.9343, 30.3351, '+7-812-234-56-78', 'Петров П.П.', '2019-05-20', 7000, 'работает'),
('Склад Новосибирск-Запад', (SELECT ид_город FROM города WHERE название = 'Новосибирск'), 'ул. Транспортная, 5', 4200, 55.0084, 82.9357, '+7-383-345-67-89', 'Сидоров С.С.', '2021-03-10', 8500, 'работает')
ON CONFLICT (название) DO NOTHING;

-- Типы ТС
INSERT INTO типы_средств_доставки (наименование, грузоподъемность_кг, объем_куб_м)
VALUES 
('Грузовик', 10000, 40),
('Фура', 25000, 82),
('Газель', 1500, 12)
ON CONFLICT (наименование) DO NOTHING;

-- Транспортные средства
INSERT INTO транспортные_средства (госномер, ид_тип_средства, год_выпуска, марка, модель, состояние, статус, дата_регистрации, пробег_км, расход_топлива_л_100км, стоимость_руб)
VALUES 
('А123БВ777', (SELECT ид_тип_средства FROM типы_средств_доставки WHERE наименование = 'Грузовик'), 2020, 'Volvo', 'FH16', 'отличное', 'активен', '2020-01-10', 50000, 28.5, 4500000),
('В456ГД199', (SELECT ид_тип_средства FROM типы_средств_доставки WHERE наименование = 'Фура'), 2019, 'Scania', 'R450', 'хорошее', 'активен', '2019-06-15', 120000, 32.0, 6000000),
('Е789КЛ154', (SELECT ид_тип_средства FROM типы_средств_доставки WHERE наименование = 'Газель'), 2021, 'ГАЗ', 'Газель Next', 'отличное', 'активен', '2021-02-20', 30000, 14.5, 1800000);

-- Клиенты
INSERT INTO клиенты (название, тип_клиента, контактный_телефон, электронная_почта, инн, статус)
VALUES 
('ООО "Ромашка"', 'юридическое_лицо', '+7-495-111-22-33', 'maria@romashka.ru', '1234567890', 'активный'),
('ИП Сидоров', 'индивидуальный_предприниматель', '+7-812-222-33-44', 'alex@sidorov.ru', '9876543210', 'активный'),
('ЗАО "ТехПром"', 'юридическое_лицо', '+7-383-333-44-55', 'info@techprom.ru', '1122334455', 'активный')
ON CONFLICT (название) DO NOTHING;

-- Статусы
INSERT INTO статусы_заказов (код_статуса, наименование, описание, цвет_индикатора, порядок_сортировки)
VALUES 
('created', 'Создан', 'Заказ создан', '#808080', 1),
('processing', 'В обработке', 'Заказ в обработке', '#3498db', 2),
('delivering', 'Доставляется', 'Груз в пути', '#f39c12', 3),
('delivered', 'Доставлен', 'Груз доставлен', '#27ae60', 4)
ON CONFLICT (код_статуса) DO NOTHING;

-- Грузы (используем РЕАЛЬНЫЕ ID складов)
INSERT INTO грузы (номер_груза, описание, вес_кг, объем_куб_м, ид_клиент, ид_склад_откуда, ид_склад_куда, ид_статус, стоимость_руб, стоимость_доставки_руб, дата_создания, дата_должна_прибыть, хрупкий)
VALUES 
('GR-2024-001', 'Электроника', 500, 2.5, 
 (SELECT ид_клиент FROM клиенты WHERE название = 'ООО "Ромашка"'), 
 (SELECT ид_склад FROM склады WHERE название = 'Склад Москва-Центр'),
 (SELECT ид_склад FROM склады WHERE название = 'Склад СПб-Север'),
 (SELECT ид_статус FROM статусы_заказов WHERE код_статуса = 'delivering'), 
 500000, 15000, '2024-01-15', '2024-01-20', true),
('GR-2024-002', 'Мебель', 1200, 8.0, 
 (SELECT ид_клиент FROM клиенты WHERE название = 'ИП Сидоров'), 
 (SELECT ид_склад FROM склады WHERE название = 'Склад СПб-Север'),
 (SELECT ид_склад FROM склады WHERE название = 'Склад Новосибирск-Запад'),
 (SELECT ид_статус FROM статусы_заказов WHERE код_статуса = 'processing'), 
 150000, 8000, '2024-01-16', '2024-01-22', false),
('GR-2024-003', 'Продукты', 800, 5.0, 
 (SELECT ид_клиент FROM клиенты WHERE название = 'ЗАО "ТехПром"'), 
 (SELECT ид_склад FROM склады WHERE название = 'Склад Новосибирск-Запад'),
 (SELECT ид_склад FROM склады WHERE название = 'Склад Москва-Центр'),
 (SELECT ид_статус FROM статусы_заказов WHERE код_статуса = 'created'), 
 80000, 5000, '2024-01-17', '2024-01-19', false);

-- Маршруты
INSERT INTO маршруты (код_маршрута, наименование, описание, общее_расстояние_км, ожидаемое_время_часов, статус, тип_маршрута, дата_создания, стоимость_за_км_руб, приоритет)
VALUES 
('MSK-SPB-001', 'Москва-СПб', 'Основной', 700, 10, 'активный', 'междугородний', '2020-01-01', 50, 1),
('SPB-NSK-001', 'СПб-Новосибирск', 'Дальний', 3300, 48, 'активный', 'междугородний', '2020-01-01', 45, 2),
('NSK-MSK-001', 'Новосибирск-Москва', 'Обратный', 3300, 46, 'активный', 'междугородний', '2020-01-01', 48, 2)
ON CONFLICT (код_маршрута) DO NOTHING;

SELECT '✅ ВСЁ ДОБАВЛЕНО!' AS результат;
